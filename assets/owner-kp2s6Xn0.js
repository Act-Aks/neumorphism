import{r as l}from"./iframe-DtOoGLv3.js";import{b as W}from"./index-INrKvmRh.js";import{u as N,j as F,h as H}from"./floating-ui.utils.dom-BZ5UQvld.js";import{u as T}from"./useIsoLayoutEffect-BH9BFz4R.js";import{j as C}from"./jsx-runtime-u17CrQMm.js";const v=l.createContext({register:()=>{},unregister:()=>{},subscribeMapChange:()=>()=>{},elementsRef:{current:[]},nextIndexRef:{current:0}});function Y(){return l.useContext(v)}function rt(t){const{children:e,elementsRef:r,labelsRef:o,onMapChange:f}=t,u=N(f),E=l.useRef(0),h=W(K).current,s=W(y).current,[i,c]=l.useState(0),g=l.useRef(i),O=N((n,p)=>{s.set(n,p??null),g.current+=1,c(g.current)}),R=N(n=>{s.delete(n),g.current+=1,c(g.current)}),a=l.useMemo(()=>{const n=new Map;return Array.from(s.keys()).filter(d=>d.isConnected).sort(U).forEach((d,S)=>{const M=s.get(d)??{};n.set(d,{...M,index:S})}),n},[s,i]);T(()=>{if(typeof MutationObserver!="function"||a.size===0)return;const n=new MutationObserver(p=>{const d=new Set,S=M=>d.has(M)?d.delete(M):d.add(M);p.forEach(M=>{M.removedNodes.forEach(S),M.addedNodes.forEach(S)}),d.size===0&&(g.current+=1,c(g.current))});return a.forEach((p,d)=>{d.parentElement&&n.observe(d.parentElement,{childList:!0})}),()=>{n.disconnect()}},[a]),T(()=>{g.current===i&&(r.current.length!==a.size&&(r.current.length=a.size),o&&o.current.length!==a.size&&(o.current.length=a.size),E.current=a.size),u(a)},[u,a,r,o,i]),T(()=>()=>{r.current=[]},[r]),T(()=>()=>{o&&(o.current=[])},[o]);const m=N(n=>(h.add(n),()=>{h.delete(n)}));T(()=>{h.forEach(n=>n(a))},[h,a]);const L=l.useMemo(()=>({register:O,unregister:R,subscribeMapChange:m,elementsRef:r,labelsRef:o,nextIndexRef:E}),[O,R,m,r,o,E]);return C.jsx(v.Provider,{value:L,children:e})}function y(){return new Map}function K(){return new Set}function U(t,e){const r=t.compareDocumentPosition(e);return r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS?1:0}const k=l.createContext(void 0);function ot(){return l.useContext(k)?.direction??"ltr"}let z=(function(t){return t[t.None=0]="None",t[t.GuessFromOrder=1]="GuessFromOrder",t})({});function st(t={}){const{label:e,metadata:r,textRef:o,indexGuessBehavior:f,index:u}=t,{register:E,unregister:h,subscribeMapChange:s,elementsRef:i,labelsRef:c,nextIndexRef:g}=Y(),O=l.useRef(-1),[R,a]=l.useState(u??(f===z.GuessFromOrder?()=>{if(O.current===-1){const n=g.current;g.current+=1,O.current=n}return O.current}:-1)),m=l.useRef(null),L=l.useCallback(n=>{if(m.current=n,R!==-1&&n!==null&&(i.current[R]=n,c)){const p=e!==void 0;c.current[R]=p?e:o?.current?.textContent??n.textContent}},[R,i,c,e,o]);return T(()=>{if(u!=null)return;const n=m.current;if(n)return E(n,r),()=>{h(n)}},[u,E,h,r]),T(()=>{if(u==null)return s(n=>{const p=m.current?n.get(m.current)?.index:null;p!=null&&a(p)})},[u,s,a]),l.useMemo(()=>({ref:L,index:R}),[R,L])}function it(t){let e=t.activeElement;for(;e?.shadowRoot?.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function ct(t,e){if(!t||!e)return!1;const r=e.getRootNode?.();if(t.contains(e))return!0;if(r&&F(r)){let o=e;for(;o;){if(t===o)return!0;o=o.parentNode||o.host}}return!1}const x="ArrowUp",_="ArrowDown",A="ArrowLeft",b="ArrowRight",I="Home",w="End",B=new Set([A,b]),at=new Set([A,b,I,w]),j=new Set([x,_]),lt=new Set([x,_,I,w]),V=new Set([...B,...j]),ft=new Set([...V,I,w]),ut=new Set([x,_,A,b,I,w]),X="Shift",G="Control",Z="Alt",q="Meta",dt=new Set([X,G,Z,q]);function J(t){return H(t)&&t.tagName==="INPUT"}function gt(t){return!!(J(t)&&t.selectionStart!=null||H(t)&&t.tagName==="TEXTAREA")}function pt(t,e,r,o){if(!t||!e||!e.scrollTo)return;let f=t.scrollLeft,u=t.scrollTop;const E=t.clientWidth<t.scrollWidth,h=t.clientHeight<t.scrollHeight;if(E&&o!=="vertical"){const s=D(t,e,"left"),i=P(t),c=P(e);r==="ltr"&&(s+e.offsetWidth+c.scrollMarginRight>t.scrollLeft+t.clientWidth-i.scrollPaddingRight?f=s+e.offsetWidth+c.scrollMarginRight-t.clientWidth+i.scrollPaddingRight:s-c.scrollMarginLeft<t.scrollLeft+i.scrollPaddingLeft&&(f=s-c.scrollMarginLeft-i.scrollPaddingLeft)),r==="rtl"&&(s-c.scrollMarginRight<t.scrollLeft+i.scrollPaddingLeft?f=s-c.scrollMarginLeft-i.scrollPaddingLeft:s+e.offsetWidth+c.scrollMarginRight>t.scrollLeft+t.clientWidth-i.scrollPaddingRight&&(f=s+e.offsetWidth+c.scrollMarginRight-t.clientWidth+i.scrollPaddingRight))}if(h&&o!=="horizontal"){const s=D(t,e,"top"),i=P(t),c=P(e);s-c.scrollMarginTop<t.scrollTop+i.scrollPaddingTop?u=s-c.scrollMarginTop-i.scrollPaddingTop:s+e.offsetHeight+c.scrollMarginBottom>t.scrollTop+t.clientHeight-i.scrollPaddingBottom&&(u=s+e.offsetHeight+c.scrollMarginBottom-t.clientHeight+i.scrollPaddingBottom)}t.scrollTo({left:f,top:u,behavior:"auto"})}function D(t,e,r){const o=r==="left"?"offsetLeft":"offsetTop";let f=0;for(;e.offsetParent&&(f+=e[o],e.offsetParent!==t);)e=e.offsetParent;return f}function P(t){const e=getComputedStyle(t);return{scrollMarginTop:parseFloat(e.scrollMarginTop)||0,scrollMarginRight:parseFloat(e.scrollMarginRight)||0,scrollMarginBottom:parseFloat(e.scrollMarginBottom)||0,scrollMarginLeft:parseFloat(e.scrollMarginLeft)||0,scrollPaddingTop:parseFloat(e.scrollPaddingTop)||0,scrollPaddingRight:parseFloat(e.scrollPaddingRight)||0,scrollPaddingBottom:parseFloat(e.scrollPaddingBottom)||0,scrollPaddingLeft:parseFloat(e.scrollPaddingLeft)||0}}function ht(t){return t?.ownerDocument||document}export{A,rt as C,w as E,I as H,dt as M,lt as V,it as a,st as b,ct as c,ut as d,_ as e,b as f,x as g,ft as h,V as i,gt as j,j as k,at as l,B as m,ht as o,pt as s,ot as u};

import{r as b}from"./index-ZLjKdOqM.js";import{u as r}from"./useIsoLayoutEffect-MG-y2aDB.js";import{u as y}from"./floating-ui.utils.dom-Dm0nyTpC.js";import{r as s}from"./iframe-DpdK6mbW.js";import{N as i,f as C,E as h}from"./index-DLnsaVFI.js";const F={clip:"rect(0 0 0 0)",overflow:"hidden",whiteSpace:"nowrap",position:"fixed",top:0,left:0,border:0,padding:0,width:1,height:1,margin:-1};let x=(function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e})({});const E={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},_={valid(e){return e===null?null:e?{[x.valid]:""}:{[x.invalid]:""}}},I=s.createContext({invalid:void 0,name:void 0,validityData:{state:E,errors:[],error:"",value:"",initialValue:null},setValidityData:i,disabled:void 0,touched:!1,setTouched:i,dirty:!1,setDirty:i,filled:!1,setFilled:i,focused:!1,setFocused:i,validate:()=>null,validationMode:"onSubmit",validationDebounceTime:0,shouldValidateOnChange:()=>!1,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1},validation:{getValidationProps:(e=h)=>e,getInputValidationProps:(e=h)=>e,inputRef:{current:null},commit:async()=>{}}});function M(e=!0){const t=s.useContext(I);if(t.setValidityData===i&&!e)throw new Error(C(28));return t}function R(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}const w=s.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:i,validationMode:"onSubmit",submitAttemptedRef:{current:!1}});function T(){return s.useContext(w)}function N(e){const{enabled:t=!0,value:l,id:n,name:u,controlRef:c,commit:m}=e,{formRef:d}=T(),{invalid:v,markedDirtyRef:p,validityData:f,setValidityData:g}=M(),o=y(e.getValue);r(()=>{if(!t)return;let a=l;a===void 0&&(a=o()),f.initialValue===null&&a!==null&&g(V=>({...V,initialValue:a}))},[t,g,l,f.initialValue,o]),r(()=>{!t||!n||d.current.fields.set(n,{getValue:o,name:u,controlRef:c,validityData:R(f,v),validate(){let a=l;a===void 0&&(a=o()),p.current=!0,b.flushSync(()=>m(a))}})},[m,c,t,d,o,n,v,p,u,f,l]),r(()=>{const a=d.current.fields;return()=>{n&&a.delete(n)}},[d,n])}const D=s.createContext({controlId:void 0,setControlId:i,labelId:void 0,setLabelId:i,messageIds:[],setMessageIds:i,getDescriptionProps:e=>e});function U(){return s.useContext(D)}function Y(e,t){const l=s.useRef(e),n=y(t);r(()=>{l.current!==e&&n(l.current)},[e,n]),r(()=>{l.current=e},[e])}export{M as a,U as b,N as c,Y as d,_ as f,T as u,F as v};

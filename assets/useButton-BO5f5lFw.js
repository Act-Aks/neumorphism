import{r as c}from"./iframe-DtOoGLv3.js";import{u as D,h as I}from"./floating-ui.utils.dom-BZ5UQvld.js";import{u as K}from"./useIsoLayoutEffect-BH9BFz4R.js";import{f as B,m as M,e as x}from"./index-INrKvmRh.js";const N=c.createContext(void 0);function O(a=!1){const o=c.useContext(N);if(o===void 0&&!a)throw new Error(B(16));return o}function T(a){const{focusableWhenDisabled:o,disabled:i,composite:u=!1,tabIndex:t=0,isNativeButton:s}=a,l=u&&o!==!1,f=u&&o===!1;return{props:c.useMemo(()=>{const r={onKeyDown(p){i&&o&&p.key!=="Tab"&&p.preventDefault()}};return u||(r.tabIndex=t,!s&&i&&(r.tabIndex=o?t:-1)),(s&&(o||l)||!s&&i)&&(r["aria-disabled"]=i),s&&(!o||f)&&(r.disabled=i),r},[u,i,o,l,f,s,t])}}function S(a={}){const{disabled:o=!1,focusableWhenDisabled:i,tabIndex:u=0,native:t=!0}=a,s=c.useRef(null),l=O(!0)!==void 0,f=D(()=>{const n=s.current;return!!(n?.tagName==="A"&&n?.href)}),{props:d}=T({focusableWhenDisabled:i,disabled:o,composite:l,tabIndex:u,isNativeButton:t}),r=c.useCallback(()=>{const n=s.current;U(n)&&l&&o&&d.disabled===void 0&&n.disabled&&(n.disabled=!1)},[o,d.disabled,l]);K(r,[r]);const p=c.useCallback((n={})=>{const{onClick:b,onMouseDown:y,onKeyUp:k,onKeyDown:w,onPointerDown:P,...E}=n;return M({type:t?"button":void 0,onClick(e){if(o){e.preventDefault();return}b?.(e)},onMouseDown(e){o||y?.(e)},onKeyDown(e){if(o||(x(e),w?.(e)),e.baseUIHandlerPrevented)return;const g=e.target===e.currentTarget&&!t&&!f()&&!o,m=e.key==="Enter",h=e.key===" ";g&&((h||m)&&e.preventDefault(),m&&b?.(e))},onKeyUp(e){o||(x(e),k?.(e)),!e.baseUIHandlerPrevented&&e.target===e.currentTarget&&!t&&!o&&e.key===" "&&b?.(e)},onPointerDown(e){if(o){e.preventDefault();return}P?.(e)}},t?void 0:{role:"button"},d,E)},[o,d,t,f]),C=D(n=>{s.current=n,r()});return{getButtonProps:p,buttonRef:C}}function U(a){return I(a)&&a.tagName==="BUTTON"}export{N as C,O as a,S as u};
